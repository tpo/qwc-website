<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.88.1">
<meta name=description content="Documentation QWC2 and QWC services">
<link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon>
<title>Übersicht :: QWC2 Documentation</title>
<link href=/qwc-website/css/nucleus.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/fontawesome-all.min.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/hybrid.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/featherlight.min.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/perfect-scrollbar.min.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/auto-complete.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/atom-one-dark-reasonable.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/theme.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/tabs.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/hugo-theme.css?1632150309 rel=stylesheet>
<link href=/qwc-website/css/theme-green.css?1632150309 rel=stylesheet>
<script src=/qwc-website/js/jquery-3.3.1.min.js?1632150309></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/qwc-website/overview/overview.de/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href><img src=/images/qwc-logo.png height=50></a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/qwc-website/js/lunr.min.js?1632150309></script>
<script type=text/javascript src=/qwc-website/js/auto-complete.js?1632150309></script>
<script type=text/javascript>var baseurl="https://qwc-services.github.io/qwc-website/"</script>
<script type=text/javascript src=/qwc-website/js/search.js?1632150309></script>
</div>
<section id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</section>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/qwc-website/overview/ title=Overview class="dd-item
parent">
<a href=/qwc-website/overview/>
Overview
</a>
<ul>
<li data-nav-id=/qwc-website/overview/overview.de/ title=Übersicht class="dd-item active">
<a href=/qwc-website/overview/overview.de/>
Übersicht
</a>
</li>
</ul>
</li>
<li data-nav-id=/qwc-website/quick-start/ title="Quick Start" class=dd-item>
<a href=/qwc-website/quick-start/>
Quick Start
</a>
</li>
<li data-nav-id=/qwc-website/configuration/ title=Configuration class=dd-item>
<a href=/qwc-website/configuration/>
Configuration
</a>
</li>
<li data-nav-id=/qwc-website/viewer/ title="QGIS Web Client 2" class=dd-item>
<a href=/qwc-website/viewer/>
Viewer
</a>
</li>
<li data-nav-id=/qwc-website/services/ title=Services class=dd-item>
<a href=/qwc-website/services/>
Services
</a>
<ul>
<li data-nav-id=/qwc-website/services/qwc-map-viewer/ title="QWC Map Viewer Service" class=dd-item>
<a href=/qwc-website/services/qwc-map-viewer/>
qwc-map-viewer
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-ogc-service/ title="QWC OGC Service" class=dd-item>
<a href=/qwc-website/services/qwc-ogc-service/>
qwc-ogc-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-feature-info-service/ title="QWC FeatureInfo Service" class=dd-item>
<a href=/qwc-website/services/qwc-feature-info-service/>
qwc-feature-info-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-fulltext-search-service/ title="QWC Fulltext Search Service" class=dd-item>
<a href=/qwc-website/services/qwc-fulltext-search-service/>
qwc-fulltext-search-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-legend-service/ title="QWC Legend Service" class=dd-item>
<a href=/qwc-website/services/qwc-legend-service/>
qwc-legend-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-permalink-service/ title="QWC Permalink Service" class=dd-item>
<a href=/qwc-website/services/qwc-permalink-service/>
qwc-permalink-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-print-service/ title="QWC Print service" class=dd-item>
<a href=/qwc-website/services/qwc-print-service/>
qwc-print-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-mapinfo-service/ title="QWC MapInfo Service" class=dd-item>
<a href=/qwc-website/services/qwc-mapinfo-service/>
qwc-mapinfo-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-data-service/ title="QWC Data Service" class=dd-item>
<a href=/qwc-website/services/qwc-data-service/>
qwc-data-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-document-service/ title="Document service" class=dd-item>
<a href=/qwc-website/services/qwc-document-service/>
qwc-document-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-elevation-service/ title="QWC Elevation Service" class=dd-item>
<a href=/qwc-website/services/qwc-elevation-service/>
qwc-elevation-service
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-admin-gui/ title="QWC Admin GUI" class=dd-item>
<a href=/qwc-website/services/qwc-admin-gui/>
qwc-admin-gui
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-registration-gui/ title="Registration GUI" class=dd-item>
<a href=/qwc-website/services/qwc-registration-gui/>
qwc-registration-gui
</a>
</li>
<li data-nav-id=/qwc-website/services/qwc-config-generator/ title="QWC Config Generator" class=dd-item>
<a href=/qwc-website/services/qwc-config-generator/>
qwc-config-generator
</a>
</li>
</ul>
</li>
<li data-nav-id=/qwc-website/authentication/ title=Authentication class=dd-item>
<a href=/qwc-website/authentication/>
Authentication
</a>
<ul>
<li data-nav-id=/qwc-website/authentication/qwc-db-auth/ title="DB Authentication Service" class=dd-item>
<a href=/qwc-website/authentication/qwc-db-auth/>
qwc-db-auth
</a>
</li>
<li data-nav-id=/qwc-website/authentication/qwc-ldap-auth/ title="LDAP Authentication Service" class=dd-item>
<a href=/qwc-website/authentication/qwc-ldap-auth/>
qwc-ldap-auth
</a>
</li>
</ul>
</li>
</ul>
<section id=footer>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=top-github-link>
<a class=github-link title="Edit this page" href=https://github.com/qwc-services/qwc-website/edit/main/content/overview/overview.de.md target=blank>
<i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span>
</a>
</div>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/qwc-website/>QWC2 / QWC Services</a> > <a href=/qwc-website/overview/>Overview</a> > Übersicht
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#user--und-zugriffsmanagement>User- und Zugriffsmanagement</a></li>
<li><a href=#rest-api>REST-API</a></li>
<li><a href=#legende>Legende</a></li>
<li><a href=#suche>Suche</a></li>
<li><a href=#informationsabfrage>Informationsabfrage</a></li>
<li><a href=#messen>Messen</a></li>
<li><a href=#drucken>Drucken</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Übersicht
</h1>
<p>The QWC Services are a collection of microservices providing configurations for and authorized access to different QWC Map Viewer components.</p>
<p><img src=/images/qwc-services-arch.png alt=qwc-services-arch></p>
<p>Die GDI besteht aus folgenden Server-Komponenten:</p>
<ul>
<li><strong>Auth-Service</strong>: Es werden verschiedene Authentisierungs-Methoden unterstützt. Z.B. HTTP Basic Authentication mit User-DB, AD/LDAP, SAML und Kerberos.
Die direkt zugänglichen Dienste enthalten eine Autorisierungsschicht für alle Zugriffe.</li>
<li><strong>Map Viewer</strong>: QWC2 Webclient mit konfigurierten Tools, offenen und zugriffsgeschützten Karten.</li>
<li><strong>OGC Service</strong>: Frontend mit Zugriffskontrolle für WMS, WFS und WMTS.</li>
<li><strong>REST Services</strong>: API Funktionen wie Search, GetLegend, etc.</li>
<li><strong>QGIS Server WMS/WFS</strong>: Server für Kartendienste (WMS) und Datendienste (WFS)</li>
<li><strong>Solr</strong>: Apache Solr Search-Engine. Dient als Backend für die Suche von Geodaten und Metadaten.</li>
<li><strong>Reporting-Server</strong>: Server-Komponente zur Erzeugung von Reports.</li>
<li><strong>Administration</strong>: Adminstrations-GUI für die Verwaltung von Usern, Rechten, Metadaten, etc.</li>
</ul>
<h3 id=user--und-zugriffsmanagement>User- und Zugriffsmanagement</h3>
<p>Für die Authentifizierung stehen folgende Services zur Verfügung:</p>
<ul>
<li>qwc-db-auth: Integrierte User-DB</li>
<li>qwc-ldap-auth: LDAP / Active Directory</li>
<li>qwc-saml-auth: SAML 2.0</li>
<li>qwc-kerberos-auth: Kerberos</li>
</ul>
<p>Die User-DB ist wird bei allen Authentisierungsmethoden benutzt, um
Usern weitergehende Rechte zu vergeben.</p>
<p>Alle Authentisierungsdienste stellen nach erfolgreicher Identifikation
ein JWT-Token aus, welches mit einem Session-Cookie oder via HTTP-Header
an die Dienste weitergeleitet wird. Das JWT-Token enthält den Usernamen
und die Rollen des Users. Die Dienste nutzen eine gemeinsame Bibliothek
zur Verarbeitung des Tokens. Diese stellt sicher, dass die
kryptographische Signatur des Tokens geprüft wird.</p>
<p>Die Authorisierung wird von den einzelnen Diensten sichergestellt. Für
den Dienstserver übernimmt der vorgeschaltete Service «qwc-ogc-service»
die Authorisierung.</p>
<p><strong>Gruppen und Rollen</strong></p>
<p>Einem User werden Zugriffsberechtigungen zu Ressourcen zugeordnet, oder
umgekehrt jeder Ressource eine Liste der jeweils zugelassenen Benutzer.</p>
<p>Mit dem Konzept von Benutzergruppen und Rollen lassen sich
Berechtigungen zusammenfassen. User können in Gruppen organisiert
werden. Werden vom Authentisierungsservice Gruppen-Informationen von
einem IDP übernommen, dann können die Gruppenrechte auch ohne Erfassung
der Userinformationen angewandt werden.</p>
<p>Zugriffsrechte, werden in einer Rollendefinition zusammengefasst. Eine
Auflistung von Zugriffsrechten wird häufig auch auch Access Control List
(ACL) genannt.</p>
<p>Diese Rollen (eine oder mehrere) können Usern oder Gruppen zugeordnet werden.</p>
<p><img src=/images/100002010000019100000075E735E86EF7DB022F.png alt></p>
<h3 id=rest-api>REST-API</h3>
<p>Die qwc-services werden über ein REST-API angesprochen. Dieses ist in
Form einer OpenAPI-Spezifikation dokumentiert.</p>
<p><img src=/images/10000201000006C1000007848FFF3358691E995D.png alt="Illustration 2: OpenAPI Dokumentation DataService"></p>
<p>Der config-service, welcher für die Verwaltung der
Service-Konfigurationen und -Permissions zuständig ist, hat ein intern
zugängliches API für den Update einer Konfiguration und
Abfrage-Funktionen. Für dieses Projekt wird das API um weitere
Funktionen zur Anpassung von Konfigurationene erweitert.</p>
<h3 id=legende>Legende</h3>
<p>Der qwc-legend-service unterstützt die Erstellung von Legenden via
Dienstserver oder die Aufbereitung der Legende mit konfigurierten
Bildern. So können dynamische Legenden mit automatisch vom Kartenserver
generierten Legenden, sowie manuell erstellte Legenden kombiniert
werden.</p>
<p><img src=/images/100002010000013F000002C91A6324D14C5FD85E.png alt></p>
<h3 id=suche>Suche</h3>
<p>Als Search-Engine wird Apache Solr (<a href=https://solr.apache.org/>https://solr.apache.org/</a>)
integriert. Die Volltext Search-Engine mit «Facet»-Suche ist unter der
Apache Lizenz erhältlich und wird unter anderem von
Internetsuchmaschinen wie DuckDuckGo eingesetzt.</p>
<p>Für den Viewer können abhängig vom Thema Suchkategorieren definiert
werden, die immer berücksichtigt werden und einzelnen Layern können
Suchkategrien zugeordnet werden, welche nur bei aktiver Layeranzeige
verwendet werden. Einem Layer kann ein Filterwort zugeordnet werden,
welches zur Kategorieneinschränkung im Viewer verwendet werden kann.</p>
<p><img src=/images/search.png alt></p>
<p>Die Gruppierung und Sortierung der Resultate erfolgt abhängig von der
Anzahl Treffer innerhalb der Kategorieren. Bei einer grossen Trefferzahl
wird der Abschnitt zur Verfeinerung der Suche aufgeklappt. Es wird eine
History der letzten Suchbegriffen geführt.</p>
<h3 id=informationsabfrage>Informationsabfrage</h3>
<p>Informationsabfragen werden über den qwc-feature-info-service
abgehandelt. Die Abfrage erfolgt mit dem WMS GetFeatureInfo-API auf eine
geographische Position und bestimmte Layer.</p>
<p>Für jeden Layer kann eine der folgenden Arten zur Informationsabfrage
konfiguriert werden:</p>
<ul>
<li>WMS Geoinformation (Standard): Weiterleitung an QGIS Server</li>
<li>DB Query: Ausführung einer konfigurierten DB-Query</li>
<li>Custom Info-Modul: Spezifisches Python-Modul zur Rücklieferung der
Layer-Info</li>
</ul>
<p>Die Resultate des Abfragemoduls werden mittels eines konfigurierbaren
HTML-Templates gerendert und als GetFeatureInfoResponse an den Webclient
zurückgeliefert.</p>
<p><img src=/images/feature-info.png alt></p>
<p>Die Darstellung der Ergebnisanzeige wird im Rahmen des Projekts den
Kundenwünschen angepasst (z.B. Löschfunktion).</p>
<h3 id=messen>Messen</h3>
<p>Es stehen Messwerkzeuge für Position, Länge, Fläche und Richtung zur
Verfügung. Masseinheiten sind vom User wählbar.</p>
<p>Der qwc-elevation-service
liefert auf Anfrage ein Höhenprofil zurück, welches bei der
Längenmessung angezeigt werden kann. Die Mausposition im Profil wird in
der Karte markiert und mit Distanzangabe und Höhe
versehen</p>
<p><img src=/images/measure.png alt>.</p>
<h3 id=drucken>Drucken</h3>
<p>Der Kartendruck erfolgt über vordefinierte Druckvorlagen. Die
Druckvorlagen werden mit QGIS als Layout erstellt und gepflegt. Dabei
ist es möglich sehr hochwertige und flexible Kartenvorlagen zu erstellen
mit einer Auflösung bis zu 1200dpi zu erstellen. Die vordefinierten
Druckvorlagen stehen dem Benutzer über eine Auswahlliste im QWC2 Client
zur Verfügung. Für beliebige Fachkarten können kartenspezifische
Druckvorlagen erstellt werden. Systemgesteuerte Angaben wie Druckdatum,
Massstabsleiste, Referenzkoordinaten, Nordpfeil und Massstabszahl sowie
viele weitere Informationen sind in den Druckvorlagen integrierbar.</p>
<p>Editierbare Textfelder die durch den Benutzer angepasst werden können
(z.B. Kartentitel, Bemerkungen etc.) sind verfügbar. Die frei
editierbaren Textfelder bleiben beim Wechsel der Druckvorlage (z.B. A4
quer zu A4 hoch) erhalten.</p>
<p>Vor dem Druck kann der Anwender im QWC2-Client den gewünschten
Druckmassstab einstellen. Es werden sowohl eine Massstabsliste als auch
ein frei wählbarer Massstab angeboten.</p>
<p>Nach dem der Ausdruck aufbereitet wurde wird dem Anwender die gewünschte
Karte in gewünschter Auflösung als PDF zum Download angeboten.</p>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/qwc-website/js/clipboard.min.js?1632150309></script>
<script src=/qwc-website/js/perfect-scrollbar.min.js?1632150309></script>
<script src=/qwc-website/js/perfect-scrollbar.jquery.min.js?1632150309></script>
<script src=/qwc-website/js/jquery.sticky.js?1632150309></script>
<script src=/qwc-website/js/featherlight.min.js?1632150309></script>
<script src=/qwc-website/js/highlight.pack.js?1632150309></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/qwc-website/js/modernizr.custom-3.6.0.js?1632150309></script>
<script src=/qwc-website/js/learn.js?1632150309></script>
<script src=/qwc-website/js/hugo-learn.js?1632150309></script>
</body>
</html>